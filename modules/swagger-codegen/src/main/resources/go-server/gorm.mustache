package db

/**
* Generated automatically from swagger-codegen. Don't edit here! There's no point :)
**/


import (
    "errors"
    "github.com/jinzhu/gorm"
    _ "github.com/jinzhu/gorm/dialects/{{db_dialect}}"
)
// If any of the models are missing indexes or primary key's etc, use the gorm
// db.Model(&User{}).AddIndex("idx_user_name", "name")
// db.Model(&User{}).AddUniqueIndex("idx_user_name", "name")
// db.Model(&User{}).RemoveIndex("idx_user_name")
// db.Exec("ALTER TABLE user MODIFY COLUMN `id` int(10) PRIMARY KEY AUTO_INCREMENT;")

var gorm_db *gorm.DB
func init() {
    if db, err := gorm.Open("{{db_dialect}}", "{{db_user}}:{{db_password}}@/{{db_name}}?charset=utf8&parseTime=True&loc=Local"); err!=nil {
        panic( err )
    }else{
        gorm_db = db
    }
}

func GetGormDBOrFail() *gorm.DB {
    if gorm_db == nil {
        panic( errors.New("Gorm db hasn't been setup") )
    }
    return gorm_db
}

